# Парсер для сбора информации о фильмах с Википедии

## Описание

Парсер создан при помощи библиотеки `scrapy` и протестирован на категории ["Фильмы США 2007 года"](https://ru.wikipedia.org/w/index.php?title=%D0%9A%D0%B0%D1%82%D0%B5%D0%B3%D0%BE%D1%80%D0%B8%D1%8F:%D0%A4%D0%B8%D0%BB%D1%8C%D0%BC%D1%8B_%D0%A1%D0%A8%D0%90_2007_%D0%B3%D0%BE%D0%B4%D0%B0).

При наличии в карточке фильма ссылки на IMDb дополнительно извлекается значение рейтинга через библиотеку `cinemagoer`.

Итоговый файл формируется в формате `.csv` и содержит поля: 

- Название

- Жанры

- Режиссер

- Страны

- Год

- Рейтинг

## Архитектура

- `movies.py` - spider с логикой парсинга

- `items.py` - описание полей данных, которые возвращает spider

- `middlewares.py` - классы middleware

- `settings.py` - настройки проекта

- `pipelines.py` - пайплайн обработки (в проекте не используется)

## Установка зависимостей и запуск скрипта

1) Клонируйте репозиторий с проектом на локальный компьютер.

`git clone <URL_репозитория>`

`cd <имя_папки_проекта>`

2) Из корня проекта запустите терминал и создайте виртуальное окружение.

`python -m venv <имя_окружения>` - общая строка для запуска виртуального окружения

`<имя_окружения>\Scripts\Activate.ps1` - активация окружения для Windows (PowerShell)

`<имя_окружения>\Scripts\activate.bat` - активация окружения для Windows (cmd)

`source <имя_окружения>/bin/activate` - активация окружения для Linux/macOS

3) Установите необходимые библиотеки.

`pip install -r requirements.txt`

4) Для получения файла в формате `.csv` выполните следующую команду:

`scrapy crawl movies -o wiki_movies.csv`



